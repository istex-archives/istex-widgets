<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Démonstration d'utilisation des widgets Istex</title>

        <!-- Config Istex -->
        <script>
            var istexConfig = {};

            // charge avec l'ezproxy de l'ul si on ajoute #ul dans l'URL
            if (document.location.hash == '#ul') {
                istexConfig.istexApi = 'https://api-istex-fr.bases-doc.univ-lorraine.fr';
            }
            // charge avec l'ezproxy bibliovie de l'inist si on ajoute #inist dans l'URL
            if (document.location.hash == '#inist') {
                istexConfig.istexApi = 'https://api-istex-fr.gate1.inist.fr';
            }
        </script>

        <!-- jQuery est une dépendances nécessaire -->
        <script src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script src="/bower_components/jquery-jsonp/src/jquery.jsonp.js"></script>
        <script src="/bower_components/js-base64/base64.js"></script>

        <!-- Bootstrap -->
        <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
        <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

        <!-- Charge la config par défault des widgets -->
        <script type="text/javascript" src="/istexconfigdefault.js"></script>

        <script type="text/javascript" src="/istexauth/js/script.js"></script>
        <link rel="stylesheet/less" type="text/css" href="/istexauth/themes/default/style.less" />

        <script type="text/javascript" src="/istexsearch/js/script.js"></script>
        <link rel="stylesheet/less" type="text/css" href="/istexsearch/themes/default/style.less" />

        <script type="text/javascript" src="/istexresults/js/script.js"></script>
        <link rel="stylesheet/less" type="text/css" href="/istexresults/themes/default/style.less" />

        <script type="text/javascript" src="/istexfacets/js/script.js"></script>
        <link rel="stylesheet/less" type="text/css" href="/istexfacets/themes/default/style.less" />

        <script> var less = { env: "development", async: true, logLevel: 1 }; </script>
        <script type="text/javascript" src="/bower_components/less/dist/less.min.js"></script>

    </head>
    <body>

    <div class="container">

      <div class="blog-header">
        <h1 class="blog-title">Démonstration d'utilisation des widgets Istex</h1>
        <p class="lead blog-description">Cette page Web est réalisée à l'aide de <a href="http://getbootstrap.com/">Bootstrap</a> et montre comment les <a href="https://github.com/istex/istex-widgets">widgets Istex</a> peuvent être intégrés à un site Web tier.
        Le contrôle d'accès de l'Istex fonctionne par <a href="#" class="reload">login/mot de passe</a> mais peut également fonctionner avec par exemple l'<a href="#ul" class="reload">ezproxy de l'Université de Lorraine</a> ou bien l'<a href="#inist" class="reload">ezproxy bibliovie du CNRS</a>.</p>
      </div>
      <script>
        // recharge la page avec le fragment dans l'URL permettant
        // de basculer sur un mode d'authentification ou un autre
        $('a.reload').click(function () {
          console.log($(this).attr('href'));
          document.location =
            document.location.origin +
            document.location.pathname +
            '?' + Math.round(Math.random()*1000) + $(this).attr('href');
        });
      </script>

      <div class="row">
        <div class="col-sm-11 blog-main">
            <div id="istex-widget-auth"></div>
            <div id="istex-widget-search"></div>
        </div>
      </div>

      <div class="row">

        <div class="col-sm-8 blog-main">

          <div class="blog-post">

            <div id="istex-widget-results"></div>

          </div><!-- /.blog-post -->

        </div><!-- /.blog-main -->

        <div class="col-sm-3 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
            <br/>
            <div id="istex-widget-facets"></div>
          </div>
        </div><!-- /.blog-sidebar -->

      </div><!-- /.row -->

    </div><!-- /.container -->

    <script type="text/javascript">
      $('#istex-widget-auth').istexAuth();
      $('#istex-widget-search').istexSearch();
      $('#istex-widget-results').istexResults();
      $('#istex-widget-facets').istexFacets();
    </script>

    </body>
</html>